---
id: network.switch
tags:
- network
- switch
title: "\u4EA4\u6362\u673A"

---


# 交换机


## 简介
交换机（Switch），交换机家族包括了以太网交换机、电话语音交换机、光纤交换机等等。本文都指以太网交换机。
交换机的前身是集线器。集线器工作在物理层（OSI 协议第一层），只支持将单一网线扩展成多网线，可以用于构建子网。它有几个致命的缺点：

- 共享带宽：集线器上的一个网口占用高带宽，其他网口网速都会变慢
- 广播数据：在冲突域内所有网口都会收到广播数据
- 非双工传输模式

交换机是一种数据链路层设备（OSI 协议第二层），这种交换机称为二层交换机，通过 MAC 地址来识别网络中的设备。

- 独立带宽：每个端口都能享受独立的带宽，不会收到其他端口的
- 只能隔离冲突域，不能分割广播域，仍然会引起广播风暴
- 全双工以太网传输模式

此后，又提出了工作在网络层（OSI 协议第三层）的三层交换机，它可以替代或部分替代传统路由器的功能，因此也可以叫路由交换机，同时也能具有接近二层的交换速度。
二层交换机和三层交换机的主要区别在于它们所支持的网络层级和功能。

- 二层交换机只能进行数据链路层的转发，不能进行路由转发和高级网络管理和控制，适用于局域网内的设备通信。
- 三层交换机不仅可以进行数据链路层的转发，还可以进行网络层的路由转发和高级网络管理和控制，适用于不同子网之间的通信和大型企业网络的管理。

根据场景分类可以分成：

- 核心层交换机
- 汇聚层交换机
- 接入层交换机

也可以根据交换速率分类成：

- 百兆交换机
- 千兆交换机
- 万兆交换机

也可以根据接口类型分类成：

- 电口交换机
- 光口交换机
- 电口光口混合交换机


## 交换机堆叠
通过交换机虚拟化技术，既可以在逻辑上集成多台物理连接的交换机，实现拓宽虚拟交换机带宽、提升转发效率的目的，也可以在逻辑上将一台物理交换机虚拟为多台虚拟交换机，实现业务隔离、提升可靠性的目的。
堆叠、M-LAG是目前广泛应用的两种横向虚拟化技术，通过将多台交换设备虚拟为一台设备，共同承担数据转发任务，提升了网络的可靠性。
堆叠（iStack）将多台交换机通过堆叠线缆连接在一起，使多台设备在逻辑上变成一台交换设备，作为一个整体参与数据转发。
作用：

- 扩展端口数量：当接入的用户数增加到原交换机端口密度不能满足接入需求时，可以通过增加新的交换机并组成堆叠而得到满足。
- 扩展带宽：当交换机上行带宽增加时，可以增加新交换机与原交换机组成堆叠系统，将成员交换机的多条物理链路配置成一个聚合组，提高交换机的上行带宽。
- 提高可靠性：堆叠与 Eth-Trunk 一同使用，当堆叠系统中一台设备的上行链路故障，通过该设备的流量可经过堆叠链路进行转发。


## 交换机模拟器

- [大学四年走来，这些网络工程师必备的模拟器我都给你整理好了](https://zhuanlan.zhihu.com/p/117563080)


### Cisco Packet Tracer
完全基于内存的实现

- 支持


### HCL
依赖 VirtualBox


### ENSP
华为现在只向供应商提供 ENSP 安装包，只能通过网络找到分享安装包资源。
依赖 VirtualBox


## 交换机指令


### Cisco


### H3C
```bash
system-view

vlan 10

display mac-address link info

display interface g1/0/24
```


### HW
